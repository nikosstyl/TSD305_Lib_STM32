# TSD305 Library for STM32

Library for using the TSD305 IR thermopile sensor with STM32 using HAL libraries. 

## The library provides the following features

* Object Temperature
* Sensor Temperature (often called ambient temperature)

## Requirements

Don't forget to change the ``#include "stm32fxxx_hal.h"`` found in ``tsd305_reg.h`` to an appropriate HAL library according your MCU.

For example, for STM32F4 series you should write ``#include "stm32f4xx_hal.h"``.

## Functions / Structs used

```c
typedef struct{
	int32_t i2c_status;
	TSD305_STATUS tsd305_status;
}status; /* Is defined in the library! */

status tsd305_read_temperature_and_object_temperature(I2C_HandleTypeDef *i2cHandle, float *temperature, float *object_temperature);
```

## Usage

```c
int main(void) {
	I2C_HandleTypeDef hi2c1; /* Usually, these variables are automatically generated by STM32CubeIDE */
	float sensor_temp = 0, object_temp = 0;
	status Status;

	Status = tsd305_read_temperature_and_object_temperature(&hi2c1, &sensor_temp, &object_temp);
	if (Status.i2c_status != HAL_I2C_ERROR_NONE) {
		Error_Handler(); /* Again, this is automatically generated by CubeIDE */
	}
	printf("Sensor temp: %d\nObject temp: %d\n\n", (int)sensor_temp, (int)object_temp);
}
```

## Inspirations / Usefull

* [TE Connectivity's Arduino Library](https://github.com/TEConnectivity/TSD305_Arduino_Library)
* [Pranjal Joshi's Arduino Library](https://github.com/pranjal-joshi/TSD305Lib-Arduino)


## License
This project is licensed under the MIT License - see the [LICENSE.md](LICENSE) file for details. 

Pull requests for bug-fixes / new features are welcomed.

<br><br>
**Year: 2023**

[**Nikos Stylianou**](https://github.com/nikosstyl)